<div class="space-y-8" style="--tc:<%= themeColor %>;">
  <!-- HEADER -->
  <div class="flex items-center justify-between">
    <h2 class="text-3xl font-bold text-gray-900 tracking-tight">Packages</h2>

    <button onclick="document.getElementById('addPackageModal').classList.remove('hidden')"
      class="px-5 py-2.5 text-white font-semibold rounded-lg shadow-sm transition" style="background: var(--tc);">
      <i class="fas fa-plus mr-2"></i> Add Package
    </button>
  </div>

  <!-- SEARCH -->
  <div class="bg-white rounded-xl shadow p-5 border border-gray-100">
    <input type="text" placeholder="Search package..."
      class="w-full px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring-2"
      style="--tw-ring-color: var(--tc);" />
  </div>

  <!-- TABLE -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50 border-b border-gray-200">
          <tr class="text-left text-xs text-gray-600 uppercase tracking-wider font-semibold">
            <th class="px-6 py-4">ID</th>
            <th class="px-6 py-4">Package Name</th>
            <th class="px-6 py-4">Monthly</th>
            <th class="px-6 py-4">Annual</th>
            <th class="px-6 py-4">Lifetime</th>
            <th class="px-6 py-4">Modules</th>
            <th class="px-6 py-4 text-center">Actions</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100">
          <% packages.forEach(pkg=> { %>
            <tr class="transition-colors hover:bg-[color-mix(in_srgb,var(--tc)_12%,white)]">
              <!-- ID -->
              <td class="px-6 py-5">
                <span class="text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded">
                  <%= pkg._id %>
                </span>
              </td>

              <!-- Package Name + Badges -->
              <td class="px-6 py-5">
                <div class="flex flex-col gap-2.5">

                  <div class="flex items-center gap-2">
                    <span class="text-base font-bold text-gray-900">
                      <%= pkg.name %>
                    </span>

                    <% if(pkg.name==='Default' ) { %>
                      <span class="w-2 h-2 rounded-full animate-pulse" style="background: var(--tc);"></span>
                      <% } %>
                  </div>

                  <!-- BADGES -->
                  <div class="flex flex-wrap gap-2">
                    <% if(pkg.name==='Default' ) { %>
                      <span
                        class="inline-flex items-center gap-1.5 px-2.5 py-1 text-white text-xs rounded-md font-semibold shadow-sm"
                        style="background: var(--tc);">
                        <i class="fas fa-info-circle text-[10px]"></i>
                        Default
                      </span>
                      <% } %>

                        <% if(pkg.isRecommended) { %>
                          <span
                            class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-600 text-white text-xs rounded-md font-semibold shadow-sm">
                            <i class="fas fa-star text-[10px]"></i> Recommended
                          </span>
                          <% } %>

                            <% if(pkg.isTrial) { %>
                              <span
                                class="inline-flex items-center gap-1.5 px-2.5 py-1 text-white text-xs rounded-md font-semibold shadow-sm"
                                style="background: var(--tc);">
                                <i class="fas fa-clock text-[10px]"></i>
                                Trial
                              </span>
                              <% } %>

                                <% if(pkg.trialDays> 0) { %>
                                  <span
                                    class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-yellow-500 text-white text-xs rounded-md font-semibold shadow-sm">
                                    <i class="fas fa-calendar text-[10px]"></i>
                                    <%= pkg.trialDays %> Days
                                  </span>
                                  <% } %>

                                    <% if(pkg.lifetimePrice> 0) { %>
                                      <span
                                        class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-purple-600 text-white text-xs rounded-md font-semibold shadow-sm">
                                        <i class="fas fa-infinity text-[10px]"></i>
                                        Lifetime
                                      </span>
                                      <% } %>

                                        <% if(pkg.isPrivate) { %>
                                          <span
                                            class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-red-600 text-white text-xs rounded-md font-semibold shadow-sm">
                                            <i class="fas fa-lock text-[10px]"></i>
                                            Private
                                          </span>
                                          <% } %>
                  </div>
                </div>
              </td>

              <!-- PRICES -->
              <td class="px-6 py-5">
                <span class="text-sm font-medium text-gray-900">
                  <%= pkg.monthlyPrice ? '₹' + pkg.monthlyPrice : "-" %>
                </span>
              </td>
              <td class="px-6 py-5">
                <span class="text-sm font-medium text-gray-900">
                  <%= pkg.annualPrice ? '₹' + pkg.annualPrice : "-" %>
                </span>
              </td>
              <td class="px-6 py-5">
                <span class="text-sm font-medium text-gray-900">
                  <%= pkg.lifetimePrice ? '₹' + pkg.lifetimePrice : "-" %>
                </span>
              </td>

              <!-- MODULES -->
              <td class="px-6 py-5">
                <div class="flex flex-wrap gap-1.5 max-w-md">
                  <% pkg.modules.forEach(module=> { %>
                    <span
                      class="inline-flex items-center px-2.5 py-1 bg-green-50 text-green-700 rounded-md text-xs font-medium border border-green-200">
                      <i class="fas fa-check mr-1 text-[10px]"></i>
                      <%= module %>
                    </span>
                    <% }) %>
                </div>
              </td>

              <!-- ACTIONS -->
              <td class="px-6 py-5">
                <div class="flex items-center justify-center gap-2">

                  <!-- Update (turn theme color) -->
                  <button data-pkg="<%= JSON.stringify(pkg) %>" onclick="openUpdateModal(JSON.parse(this.dataset.pkg))"
                    class="inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium shadow-sm transition-all hover:shadow-md transform hover:scale-105"
                    style="background: var(--tc);">
                    <i class="fas fa-edit mr-1.5"></i>
                    Update
                  </button>

                  <% if(pkg.name !=='Default' ) { %>
                    <!-- Delete (keep red) -->
                    <button data-pkg="<%= JSON.stringify(pkg) %>"
                      onclick="openDeleteModal(JSON.parse(this.dataset.pkg))"
                      class="inline-flex items-center justify-center w-10 h-10 text-red-600 hover:bg-red-50 rounded-lg transition-all border border-red-200 hover:border-red-300"
                      title="Delete package">
                      <i class="fas fa-trash"></i>
                    </button>
                    <% } %>

                </div>
              </td>

            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>
  </div>

  <%- include("./packages/addPackage.ejs") %>
    <%- include("./packages/updatePackage.ejs") %>
      <%- include("./packages/deletePackage.ejs") %>
</div>