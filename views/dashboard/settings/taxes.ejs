<!-- Taxes Tab -->
<div id="taxes" class="settings-content hidden">
  <div class="bg-white shadow-lg rounded-xl p-4 sm:p-6 lg:p-8">

    <!-- Heading -->
    <div class="mb-6 sm:mb-8">
      <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-2">
        Tax Management
      </h2>
      <p class="text-sm sm:text-base text-gray-600">
        Configure taxes that will be applied to orders
      </p>
    </div>

    <!-- Info Badge -->
    <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-3 sm:p-4 mb-6">
      <div class="flex items-start gap-2 sm:gap-3">
        <svg class="w-5 h-5 sm:w-6 sm:h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <p class="text-xs sm:text-sm text-blue-800 leading-relaxed">
          All taxes will automatically apply during order billing.
        </p>
      </div>
    </div>

    <!-- Add Tax Button -->
    <button onclick="openAddTaxModal()"
      class="w-full sm:w-auto bg-orange-600 hover:bg-orange-700 text-white font-semibold px-5 sm:px-6 py-2.5 sm:py-3 rounded-lg shadow-md hover:shadow-lg transition-all mb-6">
      <span class="flex items-center justify-center gap-2">
        <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Add Tax
      </span>
    </button>

    <!-- MOBILE VIEW -->
    <div class="block sm:hidden space-y-3">
      <% if (taxes.length> 0) { %>
        <% taxes.forEach(tax=> { %>
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-base font-semibold text-gray-900">
                  <%= tax.name %>
                </h3>
                <div class="inline-flex px-2.5 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full">
                  <%= tax.percentage %>%
                </div>
              </div>
            </div>

            <div class="flex gap-2 pt-3 border-t border-gray-200">
              <!-- Edit -->
              <button onclick="openEditTaxModal('<%= tax._id %>', '<%= tax.name %>', '<%= tax.percentage %>')"
                class="flex-1 bg-orange-50 hover:bg-orange-100 text-orange-700 px-3 py-2 rounded-lg text-sm">
                Edit
              </button>

              <!-- Delete -->
              <form action="/dashboard/<%= branchId %>/settings/tax/<%= tax._id %>?_method=DELETE" method="POST"
                class="flex-1" onsubmit="return confirm('Delete this tax?')">
                <button type="submit"
                  class="w-full bg-red-50 hover:bg-red-100 text-red-700 px-3 py-2 rounded-lg text-sm">
                  Delete
                </button>
              </form>
            </div>
          </div>
          <% }) %>
            <% } else { %>
              <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                <p class="text-sm text-gray-500">No taxes added yet.</p>
              </div>
              <% } %>
    </div>

    <!-- DESKTOP TABLE -->
    <div class="hidden sm:block overflow-x-auto rounded-lg border border-gray-200 mt-4">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700">Tax Name</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-700">Percentage</th>
            <th class="px-6 py-3 text-right text-xs font-semibold text-gray-700">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-100">
          <% if (taxes.length> 0) { %>
            <% taxes.forEach(tax=> { %>
              <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 text-sm font-semibold text-gray-900">
                  <%= tax.name %>
                </td>

                <td class="px-6 py-4">
                  <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                    <%= tax.percentage %>%
                  </span>
                </td>

                <td class="px-6 py-4 text-right">
                  <div class="flex justify-end gap-2">
                    <!-- Edit -->
                    <button onclick="openEditTaxModal('<%= tax._id %>', '<%= tax.name %>', '<%= tax.percentage %>')"
                      class="bg-orange-50 hover:bg-orange-100 text-orange-700 px-3 py-1.5 rounded-lg text-sm">
                      Update
                    </button>

                    <!-- Delete -->
                    <form action="/dashboard/<%= branchId %>/settings/tax/<%= tax._id %>?_method=DELETE" method="POST"
                      onsubmit="return confirm('Delete this tax?')">
                      <button type="submit"
                        class="bg-red-50 hover:bg-red-100 text-red-700 px-3 py-1.5 rounded-lg text-sm">
                        Delete
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
              <% }) %>
                <% } else { %>
                  <tr>
                    <td colspan="3" class="py-12 text-center text-gray-500">No taxes added.</td>
                  </tr>
                  <% } %>
        </tbody>
      </table>
    </div>

  </div>
</div>